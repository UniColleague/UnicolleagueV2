<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Edit account</title>

  <link rel="stylesheet" href="../static/profile.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  <link rel="icon" href="https://www.cspm.org/wp-content/uploads/2020/04/Y-tile-e1588095271345.png" type="image/x-icon">
  <style>
    .black{
      background-color: black;
    }
    .form-profile{
      color: white;
    }
    /* The Modal (background) */
    .modal {
      display: none;
      /* Hidden by default */
      position: fixed;
      /* Stay in place */
      z-index: 1;
      /* Sit on top */
      padding-top: 100px;
      /* Location of the box */
      left: 0;   top: 0;   width: 100%;
      /* Full width */
      height: 100%;
      /* Full height */
      overflow: auto;
      /* Enable scroll if needed */
      background-color: rgb(0,0,0);
      /* Fallback color */
      background-color: rgba(0,0,0,0.4);
      /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
      background-color: #fefefe;
      margin: auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
    }

    /* The Close Button */
    .close {
      color: #aaaaaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover, .close:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }
  </style>

</head>
<body class="black">

    <nav class="navbar navbar-expand-lg navbar-dark black" style="border-bottom: gray 0.05em solid">
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" th:href="@{/main/home}" style="font-size: 2em">Main</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" th:href="@{/main/profile}" style="font-size: 2em">Profile</a>

          </li>
          <li class="nav-item">
            <a class="nav-link" th:href="@{/main/showCalendar}" style="font-size: 2em">Calendar</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " th:href="@{/main/viewStatistics}" style="font-size: 2em">Statistics</a>
          </li>
        </ul>

        <form action="#" th:action="@{/logout}"
              method="post">

          <button type="submit" class="btn btn-danger" style="right: 0px;top: 5px; position: absolute">Logout</button>

        </form>
      </div>
    </nav>

  <div class="container" >

    <h3 style="color: white">Update account</h3>
    <hr>
    <form action="#" th:action="@{/main/updateUser}" th:object="${currentUser}" method="post">

      <input type="hidden" th:field="*{username}">
      <input type="hidden" th:field="*{active}">
      <input type="text" th:field="*{image}" placeholder="URL of avatar" class="form-control mb-4 w-50">
      <h4 class="form-profile"> Email </h4>
      <input type="email" th:field="*{email}" readonly class="form-control-plaintext mb-1 w-50 form-profile">
      <a class="btn btn-secondary btn-sm mb-4" th:href="@{/main/changeEmail(email=*{email})}">Change email</a>
      <h4 class="form-profile"> Password </h4>
      <a class="btn btn-secondary btn-sm mb-4" th:href="@{/main/changePassword}">Change password</a>
      <br>



      <button type="submit" class="btn btn-primary btn-lg">Update</button>
      <!-- The Modal -->
      <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>
          <p th:text="${state}"></p>
        </div>
      </div>
    </form>

  </div>
    <script th:if="(${state}) != null">
      // Get the modal
      var modal = document.getElementById("myModal");
      // Get the button that opens the modal
      var btn = document.getElementById("myBtn");
      // Get the <span> element that closes the modal
      var span = document.getElementsByClassName("close")[0];

      // When the user clicks the button, open the modal
      window.onload = function() {   modal.style.display = "block"; }

      // When the user clicks on <span> (x), close the modal
      span.onclick = function() {   modal.style.display = "none"; }

      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        } }
    </script>
</body>
</html>